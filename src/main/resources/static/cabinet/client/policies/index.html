<!doctype html>
<html lang="ru">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Мои полисы</title>
    <style>
        body { margin: 0; font-family: Arial, sans-serif; background: #f8fafc; color: #111827; }
        .container { width: min(1160px, calc(100% - 28px)); margin: 24px auto 48px; }
        .head { display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; gap: 10px; flex-wrap: wrap; }
        h1 { margin: 0; font-size: 34px; }
        h2 { margin: 0; font-size: 26px; }
        .btn {
            height: 38px;
            padding: 0 14px;
            border-radius: 10px;
            border: 1px solid #e5e7eb;
            background: #fff;
            cursor: pointer;
            text-decoration: none;
            color: #111827;
            display: inline-flex;
            align-items: center;
            font-size: 14px;
        }
        .btn-primary { background: #0b1220; border-color: #0b1220; color: #fff; }
        .head .btn-primary { min-width: 200px; justify-content: center; white-space: nowrap; }
        .btn-blue { background: #2563eb; border-color: #2563eb; color: #fff; }
        .error { display: none; padding: 10px 12px; border: 1px solid #fecaca; background: #fef2f2; color: #991b1b; border-radius: 10px; margin-bottom: 12px; }
        .success-hint { display:none; padding: 10px 12px; border: 1px solid #bbf7d0; background: #f0fdf4; color: #166534; border-radius: 10px; margin-bottom: 12px; }
        .section { margin-top: 16px; }
        .section-head { display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; gap: 10px; flex-wrap: wrap; }
        .muted { color: #64748b; font-size: 14px; }
        .empty { background: #fff; border: 1px solid #e5e7eb; border-radius: 12px; padding: 20px; color: #64748b; }
        table { width: 100%; border-collapse: collapse; background: #fff; border: 1px solid #e5e7eb; border-radius: 12px; overflow: hidden; }
        th, td { text-align: left; padding: 12px 14px; border-bottom: 1px solid #f1f5f9; font-size: 14px; vertical-align: top; }
        th { background: #f8fafc; color: #475569; font-weight: 700; }
        tr:last-child td { border-bottom: none; }
        .pill { display: inline-block; padding: 4px 10px; border-radius: 9999px; font-size: 12px; font-weight: 700; }
        .pill-active { background: #dcfce7; color: #166534; }
        .pill-draft { background: #e2e8f0; color: #334155; }
        .pill-pending { background: #fef3c7; color: #92400e; }
        .pill-blue { background: #dbeafe; color: #1d4ed8; }
        .pill-orange { background: #ffedd5; color: #c2410c; }
        .pill-red { background: #fee2e2; color: #991b1b; }
        .pill-violet { background: #ede9fe; color: #6d28d9; }
        .hint { border: 1px solid #dbeafe; background: #eff6ff; color: #1e40af; border-radius: 10px; padding: 10px 12px; font-size: 14px; margin-bottom: 12px; }
        @media (max-width: 900px) {
            .table-wrap { overflow: auto; }
            table { min-width: 820px; }
            h1 { font-size: 28px; }
        }
    </style>
</head>
<body>
<main class="container">
    <div class="head">
        <h1>Мои полисы и заявки</h1>
        <div style="display:flex; gap:10px; flex-wrap:wrap;">
            <a class="btn" href="/cabinet/client/index.html">Назад в кабинет</a>
            <a class="btn btn-primary" href="/insurance/osago/">Оформить новый ОСАГО</a>
        </div>
    </div>

    <div id="errorBox" class="error"></div>
    <div id="submittedBanner" class="success-hint"></div>

    <section class="section">
        <div class="section-head">
            <h2>Мои заявки на полис</h2>
        </div>
        <div class="hint">Оплата доступна только после статуса <b>Одобрена</b>.</div>
        <div id="applicationsEmpty" class="empty" style="display:none;">Заявок пока нет.</div>
        <div id="applicationsWrap" class="table-wrap" style="display:none;">
            <table>
                <thead>
                <tr>
                    <th>ID</th>
                    <th>Полис</th>
                    <th>Статус заявки</th>
                    <th>Сумма</th>
                    <th>Создано</th>
                    <th>Действия</th>
                </tr>
                </thead>
                <tbody id="applicationsBody"></tbody>
            </table>
        </div>
    </section>

    <section class="section">
        <div class="section-head">
            <h2>Мои полисы</h2>
        </div>
        <div id="policiesEmpty" class="empty" style="display:none;">Полисов пока нет.</div>
        <div id="policiesWrap" class="table-wrap" style="display:none;">
            <table>
                <thead>
                <tr>
                    <th>Полис</th>
                    <th>Статус</th>
                    <th>Автомобиль</th>
                    <th>Госномер</th>
                    <th>Период</th>
                    <th>Стоимость</th>
                    <th>Действия</th>
                </tr>
                </thead>
                <tbody id="policiesBody"></tbody>
            </table>
        </div>
    </section>
</main>
<script src="/cabinet/client/policies/policies.js"></script>
</body>
</html>
